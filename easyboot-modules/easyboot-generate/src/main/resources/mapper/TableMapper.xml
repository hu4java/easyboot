<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hu4java.generate.mapper.TableMapper">
    <resultMap type="com.hu4java.generate.entity.Table" id="tableMap">
        <result column="table_name" property="name"/>
        <result column="table_comment" property="comment"/>
        <result column="table_schema" property="schema"/>
        <result column="table_collation" property="collation"/>
        <result column="create_time" property="createTime"/>

    </resultMap>

    <sql id="allColumnSql">
        t.table_name,
        t.table_comment,
        t.table_collation,
        t.create_time
    </sql>

    <sql id="searchSql">
        <where>
            t.table_schema = database()
            <if test="condition.name != null and condition.name != ''">
                AND t.table_name LIKE CONCAT('%', #{condition.name}, '%')
            </if>
        </where>
    </sql>

    <select id="selectByTableName" resultMap="tableMap">
        select <include refid="allColumnSql"/>
        from information_schema.TABLES t
        where t.table_schema = database() and t.table_name = #{tableName}
    </select>

    <select id="selectByPage" resultMap="tableMap">
        select <include refid="allColumnSql"/>
        from information_schema.TABLES t
        <include refid="searchSql"/>
        ORDER BY t.CREATE_TIME
    </select>

</mapper>